require=function o(t,n,e){function i(c,r){if(!n[c]){if(!t[c]){var a="function"==typeof require&&require;if(!r&&a)return a(c,!0);if(s)return s(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var l=n[c]={exports:{}};t[c][0].call(l.exports,function(o){var n=t[c][1][o];return i(n||o)},l,l.exports,o,t,n,e)}return n[c].exports}for(var s="function"==typeof require&&require,c=0;c<e.length;c++)i(e[c]);return i}({BadGuy:[function(o,t,n){"use strict";cc._RF.push(t,"42a1dALJC1EUKdr0vgQh0YM","BadGuy"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],Game:[function(o,t,n){"use strict";cc._RF.push(t,"00239TaACpEmJ9C2QcR8MlP","Game"),cc.Class({extends:cc.Component,ctor:function(){this.rockPool=new cc.NodePool,this.starPool=new cc.NodePool},properties:{rockPrefab:cc.Prefab,starPrefab:cc.Prefab,player:{default:null,type:cc.Node},ground:cc.Node},onLoad:function(){var o=cc.director.getCollisionManager();o.enabled=!0,o.enabledDebugDraw=!0,console.log("collision open!"),this.initPool(10,this.rockPrefab,this.rockPool),this.initPool(5,this.starPrefab,this.starPool),this.schedule(function(){if(this.rockPool.size()>0)for(o=0;o<7;o++)this.createRock(-20,-8);if(this.starPool.size()>0)for(var o=0;o<5;o++)this.createStar(-10,0)},1);for(var t=0;t<10;t++)this.createRock(-8,0);this.player.getComponent("Player").init(),this.touchEve()},start:function(){},initPool:function(o,t,n){for(var e=o,i=0;i<e;i++){var s=cc.instantiate(t);n.put(s)}},createRock:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null;this.rockPool.size()>1&&((n=this.rockPool.get()).parent=this.ground,n.getComponent("Rock").game=this,n.getComponent("Rock").init(o,t))},createStar:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null;this.starPool.size()>1&&(n=this.starPool.get(),(n=cc.instantiate(this.starPrefab)).parent=this.ground,n.getComponent("Rock").game=this,n.getComponent("Rock").init(o,t))},touchEve:function(){var o=null,t=null,n=this.node.width/8,e=this.node.width/8*-1.5;this.node.on("touchstart",function(t){o=t.getLocationX()}),this.node.on("touchend",function(i){t=i.getLocationX(),o-t>10&&this.getChildByName("player").x>e+20?this.getChildByName("player").x-=n:o-t<-5&&this.getChildByName("player").x<-e-20&&(this.getChildByName("player").x+=n)})}}),cc._RF.pop()},{}],Ground:[function(o,t,n){"use strict";cc._RF.push(t,"582b5z7yWVK5p1AgUwwJGkP","Ground"),cc.Class({extends:cc.Component,properties:{speed:200},start:function(){}}),cc._RF.pop()},{}],Player:[function(o,t,n){"use strict";cc._RF.push(t,"35a88Jz1KxMGajI03ZNpNPA","Player"),cc.Class({extends:cc.Component,ctor:function(){this.jump=cc.jumpBy(1,0,0,100,1),this.flag=0,this.case=0},properties:{positionY:0,speed:0,ground:{default:null,type:cc.Node}},onLoad:function(){console.log(this.ground.children)},start:function(){},update:function(o){},init:function(){var o=this.node.parent.width/8,t=this.positionY,n=this.jump;console.log(o),this.node.x=this.randomIntEx0()*o,console.log(this.node.x),this.node.y=this.positionY,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.node.on("touchstart",function(){console.log("我被点了",this),Math.round(this.y)===t&&(this.runAction(n),console.log("action",n.isDone()),this.getComponent("Player").flag=1)})},randomIntEx0:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.random(),e=Math.floor(Math.random()*(t-o))+o+.5;return n<.5?e:-e},onKeyDown:function(o){var t=this.node.parent.width/8,n=this.node.parent.width/8*-1.5;switch(o.keyCode){case cc.KEY.a:this.node.x>n+20&&(this.node.x-=t,console.log("Press a"+this.node.x+n));break;case cc.KEY.d:this.node.x<-n-20&&(this.node.x+=t,console.log("Press d"+this.node.x+n));break;case cc.KEY.s:console.log(this.node.y),console.log(this.positionY),Math.round(this.node.y)===this.positionY&&(this.node.runAction(this.jump),this.flag=1)}},onRock:function(o,t){"Rock"===o.node.name?(this.ground.getComponent("Ground").speed=0,this.scheduleOnce(function(){this.node.parent.getComponent("Game").rockPool.put(o.node),this.ground.getComponent("Ground").speed=200},1)):"star"===o.node.name?(this.ground.getComponent("Ground").speed+=400,console.log("我确实碰到了星星，加速"),this.node.parent.getComponent("Game").starPool.put(o.node),this.scheduleOnce(function(){this.ground.getComponent("Ground").speed=200},1)):console.log("我确实碰到了星星但是函数没起作用")},onCollisionEnter:function(o,t){console.log("on collision enter"),1===this.flag?this.jump.isDone()?(this.onRock(o,t),console.log("我跳完之后, 碰到了石头")):(this.case=1,console.log("这次就看碰撞结束函数了")):(this.onRock(o,t),console.log("我一次也没跳过，就这样碰上了石头"))},onCollisionExit:function(o,t){console.log("on collision exit"),1===this.case&&(this.jump.isDone()?(this.onRock(o,t),console.log("我撞上了石头"),this.case=0):console.log("我跨过了石头"))}}),cc._RF.pop()},{}],Rock:[function(o,t,n){"use strict";cc._RF.push(t,"34290zxHm9PHKnWDfjOG45g","Rock"),cc.Class({extends:cc.Component,properties:{positionX:0,positionY:0,speed:200},onLoad:function(){},start:function(){},update:function(o){this.node.y-=o*this.node.parent.getComponent("Ground").speed,this.node.y<-this.node.parent.parent.height/2&&("Rock"===this.node.name?this.destorySelf(this.game.rockPool):"star"===this.node.name&&this.destorySelf(this.game.starPool))},init:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.game.player.getComponent("Player"),e=this.node.parent.parent;this.node.x=n.randomIntEx0()*e.width/8,this.node.y=Math.abs(n.randomIntEx0(o,t))*e.height/16},destorySelf:function(o){o.put(this.node)}}),cc._RF.pop()},{}],Scroll:[function(o,t,n){"use strict";cc._RF.push(t,"2fdf7XGEGFHspOysoAF2gdy","Scroll"),cc.Class({extends:cc.Component,properties:{scrollSpeed:200,offsetY:0},start:function(){},update:function(o){this.node.y-=o*this.node.parent.getComponent("Ground").speed,this.node.y<-this.offsetY&&(this.node.y+=this.node.height)}}),cc._RF.pop()},{}],Star:[function(o,t,n){"use strict";cc._RF.push(t,"f2139Q34+ZBarLgUaB4zMb9","Star"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}]},{},["BadGuy","Game","Ground","Player","Rock","Scroll","Star"]);